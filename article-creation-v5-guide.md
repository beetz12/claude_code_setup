# Article Creation v5 ワークフロー実行ガイド

## 概要
このガイドは、Claude Codeがユーザーの記事作成要求を受けて、v5自律型ワークフローを実行するための手順です。
v5テンプレート（article-creation-workflow-v5-template.md）を使用して、様々なタイプの記事を作成できます。

## 実行フロー

### 1. ユーザー要求の受付
ユーザー: 「〇〇についての技術記事を書いてください」

### 2. 要件の整理
Claude Codeは対話的に情報を収集し、自然言語形式で要件をまとめます。

#### 要件ドキュメントの形式
```markdown
# 記事作成要件

## ユーザーの要望
[ユーザーの最初の要望をそのまま記載]

## 対話で明確になった詳細

### 想定読者
[ユーザーの回答をそのまま記載]
例：「Kubernetesの基礎は分かっているDevOpsエンジニアで、本番環境での運用経験はまだ浅い人」

### 記事の目標
[ユーザーの回答をそのまま記載]
例：
- Helmチャートの基本的な使い方を理解してもらう
- 自分でチャートを作成できるようになってもらう
- ベストプラクティスを知ってもらう

### 制約条件
- 文字数：[ユーザーの希望、なければ1500-2000文字]
- 技術レベル：[初級/中級/上級]
- その他：[ユーザーが述べた制約]

### 特別な要件
[ユーザーが述べた特別な要件をそのまま記載]
例：
- 実際に動くサンプルコードを含めてほしい
- AWSでの実装例を中心にしてほしい
- セキュリティの考慮事項も含めてほしい
```

### 3. 対話的な情報収集テンプレート

```markdown
## 記事作成のための情報を教えてください

1. **記事のタイトルまたはトピック**は何ですか？
   → [ユーザー回答を待つ]

2. **想定読者**について教えてください：
   - 読者の技術レベルは？（初心者/中級者/上級者）
   - 読者の背景知識は？（例：Python経験あり、AWS未経験）
   → [ユーザー回答を待つ]

3. **記事で達成したい目標**を3つまで教えてください：
   → [ユーザー回答を待つ]

4. **特別な要件**はありますか？
   - 文字数の希望（デフォルト：1500-2000文字）
   - 含めたい具体例やツール
   - 避けたい内容
   → [ユーザー回答を待つ]
```

### 4. 要件の確認とコーディネーター起動

```markdown
## 確認
以下の要件で記事を作成します：

[要件ドキュメントの内容を表示]

よろしいですか？

## Claude Codeの実行
ユーザーの確認が取れたら、Claude Codeが直接コーディネーターエージェントを起動します。
```

### 5. Claude Codeによるコーディネーター起動

Claude Codeが実行する処理：

```python
# 1. ワークスペースの作成
timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
work_dir = f"article-workspace-{timestamp}"
os.makedirs(work_dir)

# 2. 要件ドキュメントの保存
with open(f"{work_dir}/article-requirements.md", "w") as f:
    f.write(requirements_doc)

# 3. コーディネータープロンプトの作成
coordinator_prompt = f"""
# v5 自律型記事作成コーディネーター

## 初期タスク
1. article-requirements.md を読み込んで要件を理解
2. ../article-creation-workflow-v5-template.md を読み込んでテンプレートを理解
3. 要件に基づいて、テンプレートのプレースホルダーを具体的な内容に置き換え
4. 要件に基づいて初期複雑度評価（1-10）を実施

## 記事作成要件
{requirements_doc}

## 実行指示
上記の要件に従って、v5自律型ワークフローを実行してください。

### 動的判断の考慮事項
- 外部APIやツールの記述がある場合はAgent F（ファクトチェック）を起動
- コード例が必要な場合は動作確認を重視
- 文字数制限が厳しい場合は最適化エージェントを検討

開始してください。
"""

# 4. コーディネーターエージェントの起動
mcp__ccm__claude_code(
    model="opus",
    workFolder=work_dir,
    prompt=coordinator_prompt
)
```

## 要件ドキュメントの例

### 技術記事の例
```markdown
# 記事作成要件

## ユーザーの要望
Docker Composeを使ったマイクロサービスの始め方について記事を書いてください

## 対話で明確になった詳細

### 想定読者
バックエンド開発者で、Dockerの基本的なコマンドは知っているけど、
Docker Composeはまだ使ったことがない人

### 記事の目標
- Docker Composeの基本概念を理解してもらう
- 簡単なマイクロサービス構成を作れるようになってもらう
- 開発環境での活用方法を知ってもらう

### 制約条件
- 文字数：2000-2500文字
- 技術レベル：中級

### 特別な要件
- 実際に動くdocker-compose.ymlのサンプルを含める
- よくあるトラブルシューティングも含める
```

### チュートリアル記事の例
```markdown
# 記事作成要件

## ユーザーの要望
React Hooksを使った実践的なハンズオン記事を書いてください

## 対話で明確になった詳細

### 想定読者
Reactの基礎は理解しているが、Hooksはまだよく分からない
フロントエンド開発者

### 記事の目標
- useState、useEffectの実践的な使い方を身につけてもらう
- カスタムフックの作り方を理解してもらう
- 実際のアプリケーション開発で使えるパターンを学んでもらう

### 特別な要件
- ステップバイステップで進められる構成にしてほしい
- 各ステップで動作確認できるコードを含めてほしい
- CodeSandboxで動くデモのリンクも欲しい
```

## トラブルシューティング

### よくある問題
1. **設定ファイルの検証**
   - 必須フィールドの確認
   - 値の妥当性チェック

2. **ワークフロー選択**
   - 特殊要件によってはv4や他のワークフローを推奨
   - 記事タイプによっては専用の実装ファイル（例：v5-mcp.md）を使用

3. **リソース見積もり**
   - 複雑な記事はOpus使用率が上がることを警告

## 拡張可能性

### 記事タイプ別実装
既存の実装ファイル：
- `article-creation-workflow-v5-mcp.md` - MCP技術記事用

今後追加可能な実装：
- `article-creation-workflow-v5-tutorial.md` - チュートリアル記事用
- `article-creation-workflow-v5-technical.md` - 技術解説記事用
- `article-creation-workflow-v5-guide.md` - ガイド記事用

### 履歴からの再利用
```bash
# 過去の設定を再利用
./article-v5-wizard.sh --from-history
```